<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
   <extension
         id="org.openmodelica.modelicaml.modelicamlMarker"
         name="ModelicaML Simulation"
         point="org.eclipse.core.resources.markers">
      <persistent
            value="false">
      </persistent>
   </extension>
   <extension
         point="org.eclipse.emf.ecore.uri_mapping">
      <mapping
            source="pathmap://PALETTE_PROFILE/"
            target="platform:/plugin/org.openmodelica.modelicaml.profile/profiles/"/>
   </extension>
   <extension
         point="org.eclipse.papyrus.extensionpoints.uml2.UMLProfile">
      <profile
            description="ModelicaML - A UML Profile for Modelica"
            iconpath="resources/icons/icons16/modelicaml_logo_16x16_v02.png"
            name="ModelicaML (1.2.0)"
            path="pathmap://PALETTE_PROFILE/ModelicaML.profile.uml"
            provider="OpenModelica Project">
      </profile>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.papyrus.modelexplorer.modelexplorer.popup">
         <menu
               icon="resources/icons/timeline_marker.png"
               label="ModelicaML: Simulation">
            <command
                  commandId="org.openmodelica.modelicaml.simulation.commands.CGAndSimulateThisClassWithOMCSimCenter"
                  icon="resources/icons/timeline_marker.png"
                  label="Simulate with OMSim Center"
                  style="push"
                  tooltip="Open in OMC Simulation Center">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <or>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Package">
                              </instanceof>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Class">
                              </instanceof>
                           </or>
                        </adapt>
                     </iterate>
                  </with>
               </visibleWhen>
            </command>
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeWorkbenchWindow.activePerspective">
                  <equals
                        value="org.openmodelica.modelicaml.perspective">
                  </equals>
               </with>
            </visibleWhen>
         </menu>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.papyrus.modelexplorer.modelexplorer.popup">
         <menu
               icon="resources/icons/icons16/launcher.gif"
               label="ModelicaML: Validation and Code Generation">
            <command
                  commandId="org.openmodelica.modelicaml.gen.modelica.commands.ValidateModelicaMLModel"
                  icon="resources/icons/icons16/validate.gif"
                  label="Validate ModelicaML model (entire model)"
                  style="push"
                  tooltip="Validate ModelicaML model (entire model)">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <or>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Package">
                              </instanceof>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Class">
                              </instanceof>
                           </or>
                        </adapt>
                     </iterate>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.eclipse.papyrus.modelexplorer.ValidateDelMarkersFromSubtreeCommand"
                  icon="resources/icons/list-remove.png"
                  id="org.eclipse.papyrus.modelexplorer.DelMarkersFromSubtree"
                  label="Remove markers from sub-tree"
                  tooltip="Remove markers from sub-tree">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                        </adapt>
                     </iterate>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.gen.modelica.commands.GenerateModelicaCodeFromThisElement"
                  icon="resources/icons/icons16/launcher.gif"
                  label="Generate Modelica code (from sub-tree)"
                  style="push"
                  tooltip="Generate Modelica code (from sub-tree)">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <or>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Package">
                              </instanceof>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Class">
                              </instanceof>
                           </or>
                        </adapt>
                     </iterate>
                  </with>
               </visibleWhen>
            </command>
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeWorkbenchWindow.activePerspective">
                  <equals
                        value="org.openmodelica.modelicaml.perspective">
                  </equals>
               </with>
            </visibleWhen>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar">
         <toolbar
               id="org.openmodelica.modelicaml.toolbar"
               label="ModelicaML">
            <command
                  commandId="org.openmodelica.modelicaml.gen.modelica.commands.GenerateModelicaCode"
                  icon="resources/icons/icons16/launcher.gif"
                  label="Generate Modelica code (from entire ModelicaML model)"
                  style="push"
                  tooltip="Generate Modelica code (from entire ModelicaML model)">
               <visibleWhen>
                  <with
                        variable="activeEditorId">
                     <equals
                           value="org.eclipse.papyrus.core.papyrusEditor">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.gen.modelica.commands.ValidateModelicaMLModel"
                  icon="resources/icons/icons16/validate.gif"
                  label="Validate ModelicaML model (entire model)"
                  style="push"
                  tooltip="Validate ModelicaML model (entire model)">
               <visibleWhen>
                  <with
                        variable="activeEditorId">
                     <equals
                           value="org.eclipse.papyrus.core.papyrusEditor">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeWorkbenchWindow.activePerspective">
                  <equals
                        value="org.openmodelica.modelicaml.perspective">
                  </equals>
               </with>
            </visibleWhen>
            <command
                  commandId="org.openmodelica.modelicaml.helper.commands.runtests"
                  icon="resources/icons/icons16/execute.png"
                  label="Run Tests"
                  style="push"
                  tooltip="Run Tests">
               <visibleWhen>
                  <with
                        variable="activeEditorId">
                     <equals
                           value="org.eclipse.papyrus.core.papyrusEditor">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
         </toolbar>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.papyrus.modelexplorer.modelexplorer.popup">
         <menu
               icon="resources/icons/plugin_go.png"
               label="ModelicaML: Helper">
            <!--
            <command
                  commandId="org.openmodelica.modelicaml.helper.commands.instantiaterequirements"
                  icon="resources/icons/list-accept.png"
                  label="Instantiate Requirements"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.helper.commands.updateTestOracleElements"
                  icon="resources/icons/icons16/update.png"
                  label="Update Requirements Test Oracle Elements"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            -->
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeWorkbenchWindow.activePerspective">
                  <equals
                        value="org.openmodelica.modelicaml.perspective">
                  </equals>
               </with>
            </visibleWhen>
            <separator
                  name="org.openmodelica.modelicaml.helper.separator1">
            </separator>
            <command
                  commandId="org.openmodelica.modelicaml.helper.commands.generatesimmodels"
                  icon="resources/icons/icons16/generateSimMopdels.png"
                  label="Generate Test Simulation Models"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.helper.commands.runtests"
                  icon="resources/icons/icons16/execute.png"
                  label="Run Tests"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
         </menu>
      </menuContribution>
   </extension>

   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.papyrus.modelexplorer.modelexplorer.popup">
         <menu
               icon="resources/icons/icons16/Add.png"
               label="ModelicaML: New Element">
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreatePackageCommand"
                  icon="resources/icons/papyrus/Package.gif"
                  label="Package(s)"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateClassDiagram"
                  icon="resources/icons/papyrus/Diagram_Class.gif"
                  label="Class Diagram"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <separator
                  name="org.openmodelica.modelicaml.profile.separator1"
                  visible="true">
            </separator>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaRequirementCommand"
                  icon="resources/icons/icons16/requirement.gif"
                  label="Requirement(s)"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaClassCommand"
                  icon="resources/icons/icons16/model.gif"
                  label="System Model(s)"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaConnectorCommand"
                  icon="resources/icons/icons16/connector.gif"
                  label="Interface Defintion(s)"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaCalculationModelCommand"
                  icon="resources/icons/icons16/calculationModel.gif"
                  label="Calculation Model(s)"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateTestScenarioCommand"
                  icon="resources/icons/icons16/calculationModel.gif"
                  label="Test Scenario(s)"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaSimulationModelCommand"
                  icon="resources/icons/icons16/model.gif"
                  label="Simulation Model(s)"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <separator
                  name="org.openmodelica.modelicaml.profile.separator2"
                  visible="true">
            </separator>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateValueMediatorsContainerCommand"
                  icon="resources/icons/icons16/valueMediatorsContainer.png"
                  label="Value Mediator Container"
                  style="push"
                  tooltip="Value Mediator Container">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateValueMediatorCommand"
                  icon="resources/icons/icons16/valueMediator.png"
                  label="Value Mediator"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <and>
                              <test
                                    args="ModelicaML::ValueBinding::ValueMediatorsContainer"
                                    forcePluginActivation="true"
                                    property="org.openmodelica.modelicaml.testers.hasStereotype">
                              </test>
                           </and>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <separator
                  name="org.openmodelica.modelicaml.profile.separator3"
                  visible="true">
            </separator>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaRequirementInstanceCommand"
                  icon="resources/icons/icons16/requirementInstance.png"
                  label="Requirement Instance"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <test
                                 args="ModelicaML::ModelicaSimulationConstructs::Simulation"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaFunctionArgumentCommand"
                  icon="resources\icons\icons16\Parameter.gif"
                  label="Function Argument"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaVariableCommand"
                  icon="resources/icons/icons16/variable.png"
                  label="Variables (Primitive)"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaEnumerationLiteralCommand"
                  icon="resources/icons/icons16/EnumerationLiteral.gif"
                  label="Enumeration Literal"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <separator
                  name="org.openmodelica.modelicaml.profile.separator4"
                  visible="true">
            </separator>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaComponentCommand"
                  icon="resources/icons/icons16/component.png"
                  label="Component (Model Usage)"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <or>
                              <test
                                    args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                    forcePluginActivation="true"
                                    property="org.openmodelica.modelicaml.testers.hasStereotype">
                              </test>
                              <test
                                    args="ModelicaML::ModelicaClassConstructs::Model"
                                    forcePluginActivation="true"
                                    property="org.openmodelica.modelicaml.testers.hasStereotype">
                              </test>
                              <test
                                    args="ModelicaML::ModelicaClassConstructs::Block"
                                    forcePluginActivation="true"
                                    property="org.openmodelica.modelicaml.testers.hasStereotype">
                              </test>
                           </or>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaPortCommand"
                  icon="resources/icons/papyrus/Port.gif"
                  label="Port (Interface Usage)"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateConnectionDiagram"
                  icon="resources/icons/papyrus/Diagram_CompositeStructure.gif"
                  label="Connection Diagram"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <separator
                  name="org.openmodelica.modelicaml.profile.separator5"
                  visible="true">
            </separator>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaCalculatedPropertyCommand"
                  icon="resources/icons/icons16/calculatedProperty.png"
                  label="Calculated Property (Calculation Model Usage)"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <not>
                              <test
                                    args="ModelicaML::ValueBinding::ValueMediatorsContainer"
                                    forcePluginActivation="true"
                                    property="org.openmodelica.modelicaml.testers.hasStereotype">
                              </test>
                           </not>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <separator
                  name="org.openmodelica.modelicaml.profile.separator6"
                  visible="true">
            </separator>
            <menu
                  label="Modelica Classes">
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaPackageCommand"
                     icon="resources/icons/icons16/package.gif"
                     label="Modelica Package"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaOperatorCommand"
                     icon="resources/icons/icons16/operator.gif"
                     label="Operator"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaModelCommand"
                     icon="resources/icons/icons16/model.gif"
                     label="Model"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaBlockCommand"
                     icon="resources/icons/icons16/block.gif"
                     label="Block"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaConnectorCommand"
                     icon="resources/icons/icons16/connector.gif"
                     label="Connector"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaRecordCommand"
                     icon="resources/icons/icons16/record.gif"
                     label="Record"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaFunctionCommand"
                     icon="resources/icons/papyrus/FunctionBehavior.gif"
                     label="Function"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaTypeCommand"
                     icon="resources/icons/icons16/type.gif"
                     label="Type"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaEnumerationCommand"
                     icon="resources/icons/papyrus/Enumeration.gif"
                     label="Enumeration"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </menu>
            <separator
                  name="org.openmodelica.modelicaml.profile.separator7"
                  visible="true">
            </separator>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaAlgorithmCommand"
                  icon="resources/icons/papyrus/OpaqueBehavior.gif"
                  label="Algorithm Section"
                  style="push"
                  tooltip="Algorithm Section">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <not>
                              <test
                                    args="ModelicaML::ValueBinding::ValueMediatorsContainer"
                                    forcePluginActivation="true"
                                    property="org.openmodelica.modelicaml.testers.hasStereotype">
                              </test>
                           </not>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaEquationsCodeCommand"
                  icon="resources/icons/papyrus/OpaqueBehavior.gif"
                  label="Equation Section"
                  style="push"
                  tooltip="Equation Section">
               <visibleWhen
                     checkEnabled="true">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <not>
                              <test
                                    args="ModelicaML::ValueBinding::ValueMediatorsContainer"
                                    forcePluginActivation="true"
                                    property="org.openmodelica.modelicaml.testers.hasStereotype">
                              </test>
                           </not>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateStateMachineDiagram"
                  icon="resources/icons/papyrus/Diagram_StateMachine.gif"
                  label="State Machine"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <separator
                  name="org.openmodelica.modelicaml.profile.separator8"
                  visible="true">
            </separator>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaAssertCommand"
                  icon="resources/icons/papyrus/Constraint.gif"
                  label="Assert"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <separator
                  name="org.openmodelica.modelicaml.profile.separator9"
                  visible="true">
            </separator>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateModelicaAnnotationCommand"
                  icon="resources/icons/papyrus/Comment.gif"
                  label="Annotation"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <separator
                  name="org.openmodelica.modelicaml.profile.separator10"
                  visible="true">
            </separator>
            <menu
                  label="Nested Classes">
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaRequirementCommand"
                     icon="resources/icons/icons16/requirement.gif"
                     label="Requirement(s)"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaClassCommand"
                     icon="resources/icons/icons16/model.gif"
                     label="System Model(s)"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false"
                              operator="or">
                           <adapt
                                 type="org.eclipse.emf.ecore.EObject">
                              <or>
                                 <test
                                       args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                       forcePluginActivation="true"
                                       property="org.openmodelica.modelicaml.testers.hasStereotype">
                                 </test>
                                 <test
                                       args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                       forcePluginActivation="true"
                                       property="org.openmodelica.modelicaml.testers.hasStereotype">
                                 </test>
                                 <test
                                       args="ModelicaML::ModelicaClassConstructs::Model"
                                       forcePluginActivation="true"
                                       property="org.openmodelica.modelicaml.testers.hasStereotype">
                                 </test>
                                 <test
                                       args="ModelicaML::ModelicaClassConstructs::Block"
                                       forcePluginActivation="true"
                                       property="org.openmodelica.modelicaml.testers.hasStereotype">
                                 </test>
                              </or>
                           </adapt>
                        </iterate>
                        <count
                              value="1">
                        </count>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaConnectorCommand"
                     icon="resources/icons/icons16/connector.gif"
                     label="Interface Defintion(s)"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false"
                              operator="or">
                           <adapt
                                 type="org.eclipse.emf.ecore.EObject">
                              <or>
                                 <test
                                       args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                       forcePluginActivation="true"
                                       property="org.openmodelica.modelicaml.testers.hasStereotype">
                                 </test>
                                 <test
                                       args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                       forcePluginActivation="true"
                                       property="org.openmodelica.modelicaml.testers.hasStereotype">
                                 </test>
                                 <test
                                       args="ModelicaML::ModelicaClassConstructs::Model"
                                       forcePluginActivation="true"
                                       property="org.openmodelica.modelicaml.testers.hasStereotype">
                                 </test>
                                 <test
                                       args="ModelicaML::ModelicaClassConstructs::Block"
                                       forcePluginActivation="true"
                                       property="org.openmodelica.modelicaml.testers.hasStereotype">
                                 </test>
                              </or>
                           </adapt>
                        </iterate>
                        <count
                              value="1">
                        </count>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaCalculationModelCommand"
                     icon="resources/icons/icons16/calculationModel.gif"
                     label="Calculation Model(s)"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <command
                     commandId="org.openmodelica.modelicaml.commands.CreateModelicaSimulationModelCommand"
                     icon="resources/icons/icons16/model.gif"
                     label="Simulation Model(s)"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                     <with
                           variable="selection">
                        <iterate
                              ifEmpty="false"
                              operator="or">
                           <adapt
                                 type="org.eclipse.emf.ecore.EObject">
                              <or>
                                 <test
                                       args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                       forcePluginActivation="true"
                                       property="org.openmodelica.modelicaml.testers.hasStereotype">
                                 </test>
                                 <test
                                       args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                       forcePluginActivation="true"
                                       property="org.openmodelica.modelicaml.testers.hasStereotype">
                                 </test>
                                 <test
                                       args="ModelicaML::ModelicaClassConstructs::Model"
                                       forcePluginActivation="true"
                                       property="org.openmodelica.modelicaml.testers.hasStereotype">
                                 </test>
                                 <test
                                       args="ModelicaML::ModelicaClassConstructs::Block"
                                       forcePluginActivation="true"
                                       property="org.openmodelica.modelicaml.testers.hasStereotype">
                                 </test>
                              </or>
                           </adapt>
                        </iterate>
                        <count
                              value="1">
                        </count>
                     </with>
                  </visibleWhen>
               </command>
               <menu
                     label="Modelica Classes">
                  <command
                        commandId="org.openmodelica.modelicaml.commands.CreateModelicaPackageCommand"
                        icon="resources/icons/icons16/package.gif"
                        label="Modelica Package"
                        style="push">
                     <visibleWhen
                           checkEnabled="true">
                     </visibleWhen>
                  </command>
                  <command
                        commandId="org.openmodelica.modelicaml.commands.CreateModelicaOperatorCommand"
                        icon="resources/icons/icons16/operator.gif"
                        label="Operator"
                        style="push">
                     <visibleWhen
                           checkEnabled="true">
                     </visibleWhen>
                  </command>
                  <command
                        commandId="org.openmodelica.modelicaml.commands.CreateModelicaModelCommand"
                        icon="resources/icons/icons16/model.gif"
                        label="Model"
                        style="push">
                     <visibleWhen
                           checkEnabled="true">
                     </visibleWhen>
                  </command>
                  <command
                        commandId="org.openmodelica.modelicaml.commands.CreateModelicaBlockCommand"
                        icon="resources/icons/icons16/block.gif"
                        label="Block"
                        style="push">
                     <visibleWhen
                           checkEnabled="true">
                     </visibleWhen>
                  </command>
                  <command
                        commandId="org.openmodelica.modelicaml.commands.CreateModelicaConnectorCommand"
                        icon="resources/icons/icons16/connector.gif"
                        label="Connector"
                        style="push">
                     <visibleWhen
                           checkEnabled="true">
                     </visibleWhen>
                  </command>
                  <command
                        commandId="org.openmodelica.modelicaml.commands.CreateModelicaRecordCommand"
                        icon="resources/icons/icons16/record.gif"
                        label="Record"
                        style="push">
                     <visibleWhen
                           checkEnabled="true">
                     </visibleWhen>
                  </command>
                  <command
                        commandId="org.openmodelica.modelicaml.commands.CreateModelicaFunctionCommand"
                        icon="resources/icons/papyrus/FunctionBehavior.gif"
                        label="Function"
                        style="push">
                     <visibleWhen
                           checkEnabled="true">
                     </visibleWhen>
                  </command>
                  <command
                        commandId="org.openmodelica.modelicaml.commands.CreateModelicaTypeCommand"
                        icon="resources/icons/icons16/type.gif"
                        label="Type"
                        style="push">
                     <visibleWhen
                           checkEnabled="true">
                     </visibleWhen>
                  </command>
                  <command
                        commandId="org.openmodelica.modelicaml.commands.CreateModelicaEnumerationCommand"
                        icon="resources/icons/papyrus/Enumeration.gif"
                        label="Enumeration"
                        style="push">
                     <visibleWhen
                           checkEnabled="true">
                     </visibleWhen>
                  </command>
               </menu>
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false"
                           operator="or">
                        <adapt
                              type="org.eclipse.emf.ecore.EObject">
                           <not>
                              <test
                                    args="ModelicaML::ModelicaClassConstructs::Function"
                                    forcePluginActivation="true"
                                    property="org.openmodelica.modelicaml.testers.hasStereotype">
                              </test>
                           </not>
                           <and>
                              <or>
                                 <instanceof
                                       value="org.eclipse.uml2.uml.Class">
                                 </instanceof>
                              </or>
                           </and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Package">
                              </instanceof>
                           </not>
                           <not>
                              <test
                                    args="ModelicaML::ValueBinding::ValueMediatorsContainer"
                                    forcePluginActivation="true"
                                    property="org.openmodelica.modelicaml.testers.hasStereotype">
                              </test>
                           </not>
                        </adapt>
                     </iterate>
                     <count
                           value="1">
                     </count>
                  </with>
               </visibleWhen>
            </menu>
            
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeWorkbenchWindow.activePerspective">
                  <equals
                        value="org.openmodelica.modelicaml.perspective">
                  </equals>
               </with>
            </visibleWhen>
         </menu>
         <menu
               icon="resources/icons/icons16/Window_new.png"
               label="ModelicaML: New Diagram">
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateClassDiagram"
                  icon="resources/icons/papyrus/Diagram_Class.gif"
                  label="Class Diagram"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateConnectionDiagram"
                  icon="resources/icons/papyrus/Diagram_CompositeStructure.gif"
                  label="Connection Diagram"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateStateMachineDiagram"
                  icon="resources/icons/papyrus/Diagram_StateMachine.gif"
                  label="State Machine Diagram"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateConditionalEquationDiagram"
                  icon="resources/icons/papyrus/Diagram_Activity.gif"
                  label="Conditional Equations Diagram"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="org.openmodelica.modelicaml.commands.CreateConditionalAlgorithmDiagram"
                  icon="resources/icons/papyrus/Diagram_Activity.gif"
                  label="Conditional Algorithm Diagram"
                  style="push">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeWorkbenchWindow.activePerspective">
                  <equals
                        value="org.openmodelica.modelicaml.perspective">
                  </equals>
               </with>
            </visibleWhen>
         </menu>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaOperatorCommand"
            name="Create new Modelica Operator">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaPackageCommand"
            name="Create new Modelica Package">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaClassCommand"
            name="Create new Modelica Class">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaModelCommand"
            name="Create new Modelica Model">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaBlockCommand"
            name="Create new Modelica Block">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaConnectorCommand"
            name="Create new Modelica Connector">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaTypeCommand"
            name="Create new Modelica Type">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaEnumerationCommand"
            name="Create new Modelica Enumeration">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaFunctionCommand"
            name="Create new Modelica Function">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaRecordCommand"
            name="Create new Modelica Record">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaCalculationModelCommand"
            name="Create new Modelica Calculation Model">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateTestScenarioCommand"
            name="Create new Test Scenario">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaRequirementCommand"
            name="Create new Modelica Requirement">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaEnumerationLiteralCommand"
            name="Create new Enumeration Literal">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaFunctionArgumentCommand"
            name="Create new Function Argument">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaVariableCommand"
            name="Create new Modelica Variable">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaComponentCommand"
            name="Create new Component">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaCalculatedPropertyCommand"
            name="Create new Calculated Property">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaRequirementInstanceCommand"
            name="Create new Requirement Instance">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaPortCommand"
            name="Create new Port">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaAlgorithmCommand"
            name="Create new Algorithm">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaEquationsCodeCommand"
            name="Create new Equations">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaAssertCommand"
            name="Create new Assert">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaAnnotationCommand"
            name="Create new Annotation">
      </command>
       <command
            id="org.openmodelica.modelicaml.commands.GenerateModelicaCode"
            name="Generate Modelica Code">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.ValidateModelicaMLModel"
            name="Validate ModelicaML Model">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreatePackageCommand"
            name="Create new Package">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateSignalCommand"
            name="Create Signal">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaRetrictedClassCommand"
            name="Menu Restricted Class">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.ModelicaDiagram"
            name="New ModelicaML Diagram">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateClassDiagram"
            name="Create Class Diagram">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateConnectionDiagram"
            name="Create Connection Diagram">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateStateMachineDiagram"
            name="Create State Machine Diagram">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateConditionalAlgorithmDiagram"
            name="Create Conditional Algorithm Diagram">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateConditionalEquationDiagram"
            name="Create Conditional Equations Diagram">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateModelicaSimulationModelCommand"
            name="Create new Modelica Simulation Model">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateValueMediatorCommand"
            name="Create new Value Mediator">
      </command>
      <command
            id="org.openmodelica.modelicaml.commands.CreateValueMediatorsContainerCommand"
            name="Create new Value Mediators Container">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaOperatorHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaOperatorCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </or>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreatePackageHandler"
            commandId="org.openmodelica.modelicaml.commands.CreatePackageCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <instanceof
                           value="org.eclipse.uml2.uml.Package">
                     </instanceof>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaPackageHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaPackageCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </or>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaClassHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaClassCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </or>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaModelHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaModelCommand">
            <activeWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false"
                     operator="or">
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <not>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::Function"
                              forcePluginActivation="true"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test></not>
                     <and>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof></or>
                     </and>
                     <not>
                        <instanceof
                              value="org.eclipse.uml2.uml.Behavior">
                        </instanceof>
                     </not>
                  </adapt>
                 </iterate>
               <count
                     value="1">
               </count>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaBlockHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaBlockCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </or>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaConnectorHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaConnectorCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </or>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaTypeHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaTypeCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </or>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaEnumerationHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaEnumerationCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </or>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaFunctionHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaFunctionCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <or>
                        <instanceof
                              value="org.eclipse.uml2.uml.Package">
                        </instanceof>
                        <instanceof
                              value="org.eclipse.uml2.uml.Class">
                        </instanceof>
                     </or>
                     <and>
                        <not>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Behavior">
                           </instanceof>
                        </not>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaRecordHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaRecordCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                        </or>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaCalculationModelHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaCalculationModelCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </or>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateTestScenarioHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateTestScenarioCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </or>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaRequirementHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaRequirementCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                        </or>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaEnumerationLiteralHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaEnumerationLiteralCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <instanceof
                           value="org.eclipse.uml2.uml.Enumeration">
                     </instanceof>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaFunctionArgumentHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaFunctionArgumentCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <instanceof
                              value="org.eclipse.uml2.uml.FunctionBehavior">
                        </instanceof>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::Function"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaVariableHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaVariableCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <or>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::Function"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::Model"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::Block"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::ModelicaPackage"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::Record"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::Connector"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::Operator"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::ModelicaModelReference"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::CalculationModel"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaRequirementConstructs::Requirement"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaRequirementConstructs::RequirementRepresentative"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaRequirementConstructs::MeasureOfEffectiveness"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                     </or>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaComponentHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaComponentCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <instanceof
                              value="org.eclipse.uml2.uml.Class">
                        </instanceof>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaPackage"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaCalculatedPropertyHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaCalculatedPropertyCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <instanceof
                              value="org.eclipse.uml2.uml.Class">
                        </instanceof>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaPackage"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaRequirementInstanceHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaRequirementInstanceCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <instanceof
                              value="org.eclipse.uml2.uml.Class">
                        </instanceof>
                        <or>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Block"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Model"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </or>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaPortHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaPortCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <instanceof
                              value="org.eclipse.uml2.uml.Class">
                        </instanceof>
                        <or>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Block"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Model"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::CalculationModel"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </or>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaAlgorithmHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaAlgorithmCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.FunctionBehavior">
                           </instanceof>
                        </or>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaPackage"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Record"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Connector"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Operator"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaEquationHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaEquationsCodeCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <instanceof
                              value="org.eclipse.uml2.uml.Class">
                        </instanceof>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaPackage"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Record"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Connector"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Operator"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and></and>
                  </adapt></iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaAssertHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaAssertCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <or>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::Block"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::Model"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <test
                              args="ModelicaML::ModelicaRequirementConstructs::Requirement"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                        <instanceof
                              value="org.eclipse.uml2.uml.StateMachine">
                        </instanceof>
                        <instanceof
                              value="org.eclipse.uml2.uml.State">
                        </instanceof>
                     </or>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaAnnotationHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaAnnotationCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <not>
                        <instanceof
                              value="org.eclipse.uml2.uml.Enumeration">
                        </instanceof>
                     </not>
                     <or>
                        <instanceof
                              value="org.eclipse.uml2.uml.Classifier">
                        </instanceof>
                        <instanceof
                              value="org.eclipse.uml2.uml.Package">
                        </instanceof>
                     </or>
                     <and>
                        <not>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Behavior">
                           </instanceof>
                        </not>
                        <or>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaPackage"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Operator"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Model"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Connector"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Block"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Record"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Type"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::CalculationModel"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaRequirementConstructs::Requirement"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaSimulationConstructs::Simulation"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </or>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateSignalHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateSignalCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaPackage"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Record"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Connector"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <instanceof
                              value="org.eclipse.uml2.uml.Class">
                        </instanceof>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Operator"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaMLClassDiagramHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateClassDiagram">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">

                     <or>
                        <instanceof
                              value="org.eclipse.uml2.uml.Package">
                        </instanceof>
                        <instanceof
                              value="org.eclipse.uml2.uml.Model">
                        </instanceof>
                     </or>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaMLConnectionDiagramHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateConnectionDiagram">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <or>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Model"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Block"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::CalculationModel"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </or>
                     </and>
                     <instanceof
                           value="org.eclipse.uml2.uml.Class">
                     </instanceof>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaMLStateMachineDiagramHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateStateMachineDiagram">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <or>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Model"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Block"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::CalculationModel"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaRequirementConstructs::Requirement"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </or>
                     </and>
                     <instanceof
                           value="org.eclipse.uml2.uml.Class">
                     </instanceof>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaMLConditionalEquationsDiagramHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateConditionalEquationDiagram">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <or>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Model"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Block"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::CalculationModel"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaRequirementConstructs::Requirement"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </or>
                     </and>
                     <instanceof
                           value="org.eclipse.uml2.uml.Class">
                     </instanceof>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaMLConditionalAlgorithmDiagramHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateConditionalAlgorithmDiagram">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <or>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::ModelicaClass"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Model"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Block"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::CalculationModel"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                           <test
                                 args="ModelicaML::ModelicaRequirementConstructs::Requirement"
                                 forcePluginActivation="true"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </or>
                     </and>
                     <instanceof
                           value="org.eclipse.uml2.uml.Class">
                     </instanceof>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateModelicaSimulationModelHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateModelicaSimulationModelCommand">
         <activeWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false"
                     operator="or">
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <not>
                        <test
                              args="ModelicaML::ModelicaClassConstructs::Function"
                              forcePluginActivation="true"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                     </not>
                     <and>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                        </or>
                     </and>
                     <not>
                        <instanceof
                              value="org.eclipse.uml2.uml.Behavior">
                        </instanceof>
                     </not>
                  </adapt>
               </iterate>
               <count
                     value="1">
               </count>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateValueMediatorHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateValueMediatorCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <or>
                        <test
                              args="ModelicaML::ValueBinding::ValueMediatorsContainer"
                              property="org.openmodelica.modelicaml.testers.hasStereotype">
                        </test>
                     </or>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.openmodelica.modelicaml.profile.handlers.CreateValueMediatorsContainerHandler"
            commandId="org.openmodelica.modelicaml.commands.CreateValueMediatorsContainerCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <adapt
                        type="org.eclipse.emf.ecore.EObject">
                     <and>
                        <not>
                           <test
                                 args="ModelicaML::ModelicaClassConstructs::Function"
                                 property="org.openmodelica.modelicaml.testers.hasStereotype">
                           </test>
                        </not>
                        <or>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Class">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.uml2.uml.Package">
                           </instanceof>
                        </or>
                        <and>
                           <not>
                              <instanceof
                                    value="org.eclipse.uml2.uml.Behavior">
                              </instanceof>
                           </not>
                        </and>
                     </and>
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.openmodelica.modelicaml.profile.handlers.HasStereotypePropertyTester"
            id="org.openmodelica.modelicaml.hasStereotypeTester"
            namespace="org.openmodelica.modelicaml.testers"
            properties="hasStereotype"
            type="org.eclipse.emf.ecore.EObject">
      </propertyTester>
   </extension>
   <extension
         point="org.eclipse.papyrus.diagram.common.paletteDefinition">
      <paletteDefinition
            ID="org.openmodelica.modelicaml.ModelicaMLClassDiagramPaletteDefinition"
            class="org.eclipse.papyrus.diagram.common.service.PluginPaletteProvider"
            icon="resources/icons/icons16/ModelicaML_logo.gif"
            name="ModelicaML Class Diagram Palette "
            path="/palettes/ModelicaMLClassDiagram.Palette.xml"
            provider="OpenModelica Project">
         <Priority
               name="Highest">
         </Priority>
         <editor
               id="org.eclipse.papyrus.diagram.clazz">
         </editor>
      </paletteDefinition>
   </extension>
   <extension
         point="org.eclipse.papyrus.diagram.common.paletteDefinition">
      <paletteDefinition
            ID="org.openmodelica.modelicaml.ModelicaMLConnectionDiagramPaletteDefinition"
            class="org.eclipse.papyrus.diagram.common.service.PluginPaletteProvider"
            icon="resources/icons/icons16/ModelicaML_logo.gif"
            name="ModelicaML Connection Diagram Palette "
            path="/palettes/ModelicaMLConnectionDiagram.Palette.xml"
            provider="OpenModelica Project">
         <Priority
               name="Highest">
         </Priority>
         <editor
               id="org.eclipse.papyrus.diagram.composite">
         </editor>
      </paletteDefinition>
   </extension>
   <extension
         point="org.eclipse.papyrus.diagram.common.paletteDefinition">
      <paletteDefinition
            ID="org.openmodelica.modelicaml.ModelicaMLStateMachineDiagramPaletteDefinition"
            class="org.eclipse.papyrus.diagram.common.service.PluginPaletteProvider"
            icon="resources/icons/icons16/ModelicaML_logo.gif"
            name="ModelicaML  SubSet of State Machine Diagram Palette "
            path="/palettes/ModelicaMLStateMachineDiagram.Palette.xml"
            provider="OpenModelica Project">
         <Priority
               name="Highest">
         </Priority>
         <editor
               id="org.eclipse.papyrus.diagram.statemachine">
         </editor>
      </paletteDefinition>
   </extension>
   <extension
         point="org.eclipse.papyrus.diagram.common.paletteDefinition">
      <paletteDefinition
            ID="org.openmodelica.modelicaml.ModelicaMLActivityDiagramPaletteDefinition"
            class="org.eclipse.papyrus.diagram.common.service.PluginPaletteProvider"
            icon="resources/icons/icons16/ModelicaML_logo.gif"
            name="ModelicaML SubSet of Activity Diagram Palette "
            path="/palettes/ModelicaMLActivityDiagram.Palette.xml"
            provider="OpenModelica Project">
         <Priority
               name="Highest">
         </Priority>
         <editor
               id="org.eclipse.papyrus.diagram.activity">
         </editor>
      </paletteDefinition>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.papyrus.modelexplorer.modelexplorer.popup">
         <menu
               icon="platform:/plugin/org.eclipse.papyrus.modelexplorer/icons/etool16/validate.gif"
               id="org.eclipse.papyrus.modelexplorer.popup.validation"
               label="Validation">
            <visibleWhen
                  checkEnabled="true">
                  <not>
                  <with
                        variable="activeWorkbenchWindow.activePerspective">
                     <equals
                           value="org.openmodelica.modelicaml.perspective">
                     </equals>
                  </with>
               </not>
            </visibleWhen>
         </menu>
         <menu
               id="org.eclipse.papyrus.modelexplorer.popupmenu.creatediagram"
               label="New Diagram">
            <visibleWhen
                  checkEnabled="false">
               <not>
                  <with
                        variable="activeWorkbenchWindow.activePerspective">
                     <equals
                           value="org.openmodelica.modelicaml.perspective">
                     </equals>
                  </with>
               </not>
            </visibleWhen>
         </menu>
         <menu
               id="org.eclipse.papyrus.modelexplorer.popupmenu.createchild"
               label="New Child">
            <visibleWhen
                  checkEnabled="false">
               <not>
                  <with
                        variable="activeWorkbenchWindow.activePerspective">
                     <equals
                           value="org.openmodelica.modelicaml.perspective">
                     </equals>
                  </with>
               </not>
            </visibleWhen>
         </menu>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.papyrus.core.papyrusDiagram">
      <diagramCategory
            class="org.openmodelica.modelicaml.profile.commands.ModelicaMLModelCreationCommand"
            description="ModelicaML is a UM Profile that enables the modeling of hybrid system dydimics."
            icon="resources/icons/icons32/modelicaml_logo_v02.png"
            id="modelicaml"
            label="ModelicaML">
      </diagramCategory>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="org.openmodelica.modelicaml.profile.IsPapyrusActiveWithModelicaML">
         <and>
            <with
                  variable="activeEditorId">
               <equals
                     value="org.eclipse.papyrus.core.papyrusEditor">
               </equals>
            </with>
            <with
                  variable="selection">
               <test
                     forcePluginActivation="true"
                     property="org.openmodelica.modelicaml.profile.propertyTester.isModelicaMLModel"
                     value="true">
               </test>
            </with>
         </and>
      </definition>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.openmodelica.modelicaml.properties.ModelicaMLSectionTester"
            id="org.openmodelica.modelicaml.profile.ModelicaMLSectionTester"
            namespace="org.openmodelica.modelicaml.profile.propertyTester"
            properties="isModelicaMLModel"
            type="org.eclipse.jface.viewers.ISelection">
      </propertyTester>
   </extension>
   <extension
         point="org.eclipse.papyrus.wizards.templates">
      <template
            file="templateModels/model.uml"
            id="org.openmodelica.modelicaml.profile.basicTemplate"
            language="modelicaml"
            name="ModelicaML template incl. Requirements, Desing and Simulation Packages">
      </template>
   </extension>

</plugin>
